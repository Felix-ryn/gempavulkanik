<!doctype html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>VolcanoAI – Live Monitor</title>

    <style>
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
            margin: 0;
            background: #f6f8fa;
            color: #111;
        }

        header {
            background: #0b3b5b;
            color: #fff;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

            header h1 {
                margin: 0;
                font-size: 18px;
            }

        .container {
            padding: 18px;
            max-width: 1200px;
            margin: auto;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 420px;
            gap: 16px;
        }

        .card {
            background: #fff;
            border-radius: 10px;
            padding: 12px;
            box-shadow: 0 6px 18px rgba(20,20,20,.06);
        }

        .small-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        iframe.map-frame {
            width: 100%;
            height: 420px;
            border: none;
            border-radius: 8px;
        }

        .stat {
            font-size: 14px;
            margin-bottom: 6px;
        }

        .muted {
            color: #666;
            font-size: 13px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

            table th, table td {
                padding: 6px 8px;
                border-bottom: 1px solid #eee;
            }

        .badge {
            background: #eef6ff;
            color: #0b66c3;
            padding: 4px 8px;
            border-radius: 999px;
            font-size: 12px;
        }

        img.plot {
            width: 100%;
            border-radius: 6px;
        }

        .hr {
            height: 1px;
            background: #eee;
            margin: 12px 0;
        }

        footer {
            margin-top: 16px;
            text-align: center;
            font-size: 13px;
            color: #666;
        }
    </style>
</head>

<body>

    <header>
        <h1>VolcanoAI – Monitor Live</h1>
        <div class="muted">
<<<<<<< HEAD
            2025-12-23 22:52:42
=======
            2025-12-24 00:23:39
>>>>>>> 172132b (fix luas cnn)
            <span class="badge" style="margin-left:12px">Live</span>
        </div>
    </header>

    <div class="container">

        <!-- ================= ROW 1 ================= -->
        <div class="grid">

            <!-- ===== LEFT : MAPS ===== -->
            <div class="card">
                <h3>Peta Prediksi & Dampak</h3>
                <p class="muted">ACO • GA • CNN (HTML Map)</p>

                <div class="small-grid">
                    <div class="card">
                        <div class="stat"><strong>ACO Center</strong></div>
                        <div class="muted">-7.972222222222222, 114.1711111111111</div>
                        <div class="hr"></div>
                        <div class="stat"><strong>Impact Area</strong></div>
                        <div class="muted">93.01</div>
                    </div>

                    <div class="card">
                        <div class="stat"><strong>GA Prediction</strong></div>
                        <div class="muted">Lat - | Lon -</div>
                        <div class="muted">Bearing - | Dist -</div>
                        <div class="hr"></div>
                        <div class="stat">Confidence -</div>
                    </div>
                </div>

                <h4>ACO Map</h4>
                <iframe class="map-frame" src="<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
<<<<<<< HEAD
                #map_5ce85ea9996c8f570f4024a4b6a5bbb0 {
=======
                #map_dbad3490c8f4b1894368f4cca586c307 {
>>>>>>> 172132b (fix luas cnn)
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;

            &lt;style&gt;html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            &lt;/style&gt;

            &lt;style&gt;#map {
                position:absolute;
                top:0;
                bottom:0;
                right:0;
                left:0;
                }
            &lt;/style&gt;

            &lt;script&gt;
                L_NO_TOUCH = false;
                L_DISABLE_3D = false;
            &lt;/script&gt;

        
&lt;/head&gt;
&lt;body&gt;
    
    
<<<<<<< HEAD
            &lt;div class=&quot;folium-map&quot; id=&quot;map_5ce85ea9996c8f570f4024a4b6a5bbb0&quot; &gt;&lt;/div&gt;
=======
            &lt;div class=&quot;folium-map&quot; id=&quot;map_dbad3490c8f4b1894368f4cca586c307&quot; &gt;&lt;/div&gt;
>>>>>>> 172132b (fix luas cnn)
        
&lt;/body&gt;
&lt;script&gt;
    
    
<<<<<<< HEAD
            var map_5ce85ea9996c8f570f4024a4b6a5bbb0 = L.map(
                &quot;map_5ce85ea9996c8f570f4024a4b6a5bbb0&quot;,
=======
            var map_dbad3490c8f4b1894368f4cca586c307 = L.map(
                &quot;map_dbad3490c8f4b1894368f4cca586c307&quot;,
>>>>>>> 172132b (fix luas cnn)
                {
                    center: [-7.96, 114.15],
                    crs: L.CRS.EPSG3857,
                    ...{
  &quot;zoom&quot;: 9,
  &quot;zoomControl&quot;: true,
  &quot;preferCanvas&quot;: false,
}

                }
            );

            

        
    
<<<<<<< HEAD
            var tile_layer_bb5a23e19e8593490f0e092c43c17ff1 = L.tileLayer(
=======
            var tile_layer_96b5638e9e1294b42d1311c76e10627a = L.tileLayer(
>>>>>>> 172132b (fix luas cnn)
                &quot;https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png&quot;,
                {
  &quot;minZoom&quot;: 0,
  &quot;maxZoom&quot;: 20,
  &quot;maxNativeZoom&quot;: 20,
  &quot;noWrap&quot;: false,
  &quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\&quot;https://carto.com/attributions\&quot;\u003eCARTO\u003c/a\u003e&quot;,
  &quot;subdomains&quot;: &quot;abcd&quot;,
  &quot;detectRetina&quot;: false,
  &quot;tms&quot;: false,
  &quot;opacity&quot;: 1,
}

            );
        
    
<<<<<<< HEAD
            tile_layer_bb5a23e19e8593490f0e092c43c17ff1.addTo(map_5ce85ea9996c8f570f4024a4b6a5bbb0);
        
    
            var feature_group_7fd3430f6b066cfc5e5dd73da4346c10 = L.featureGroup(
=======
            tile_layer_96b5638e9e1294b42d1311c76e10627a.addTo(map_dbad3490c8f4b1894368f4cca586c307);
        
    
            var feature_group_d08740c24c7e3e81d7f4affa4a5dc1f7 = L.featureGroup(
>>>>>>> 172132b (fix luas cnn)
                {
}
            );
        
    
<<<<<<< HEAD
            var circle_marker_5ad8b13e54e90f926e1916deae8c18ca = L.circleMarker(
                [-7.96, 114.15],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;red&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 1.0, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 12, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_7fd3430f6b066cfc5e5dd73da4346c10);
        
    
        var popup_55073c532629938d19a5adcf4a650c7d = L.popup({
=======
            var circle_marker_453baa856fdc9892e13ff6783ef7a254 = L.circleMarker(
                [-7.96, 114.15],
                {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;red&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;red&quot;, &quot;fillOpacity&quot;: 1.0, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 12, &quot;stroke&quot;: true, &quot;weight&quot;: 3}
            ).addTo(feature_group_d08740c24c7e3e81d7f4affa4a5dc1f7);
        
    
        var popup_befc759e2aa2f3895d8d69ab9e80184d = L.popup({
>>>>>>> 172132b (fix luas cnn)
  &quot;maxWidth&quot;: &quot;100%&quot;,
});

        
            
<<<<<<< HEAD
                var html_2cbd11d3a36c61233c6f5289a22a22f3 = $(`&lt;div id=&quot;html_2cbd11d3a36c61233c6f5289a22a22f3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;&lt;b&gt;LIVE ALERT&lt;/b&gt;&lt;br&gt;Mag: 2.5&lt;/div&gt;`)[0];
                popup_55073c532629938d19a5adcf4a650c7d.setContent(html_2cbd11d3a36c61233c6f5289a22a22f3);
            
        

        circle_marker_5ad8b13e54e90f926e1916deae8c18ca.bindPopup(popup_55073c532629938d19a5adcf4a650c7d)
=======
                var html_ab777ec14770acba40ac2253eaedf9d2 = $(`&lt;div id=&quot;html_ab777ec14770acba40ac2253eaedf9d2&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;&lt;b&gt;LIVE ALERT&lt;/b&gt;&lt;br&gt;Mag: 2.5&lt;/div&gt;`)[0];
                popup_befc759e2aa2f3895d8d69ab9e80184d.setContent(html_ab777ec14770acba40ac2253eaedf9d2);
            
        

        circle_marker_453baa856fdc9892e13ff6783ef7a254.bindPopup(popup_befc759e2aa2f3895d8d69ab9e80184d)
>>>>>>> 172132b (fix luas cnn)
        ;

        
    
    
<<<<<<< HEAD
            feature_group_7fd3430f6b066cfc5e5dd73da4346c10.addTo(map_5ce85ea9996c8f570f4024a4b6a5bbb0);
=======
            feature_group_d08740c24c7e3e81d7f4affa4a5dc1f7.addTo(map_dbad3490c8f4b1894368f4cca586c307);
>>>>>>> 172132b (fix luas cnn)
        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"></iframe>

                <h4 style="margin-top:12px;">GA Path</h4>
                <iframe class="map-frame" src="output\ga_results\ga_path_map.html"></iframe>

                <!-- ================= CNN MAP HTML ================= -->
                <h4 style="margin-top:12px;">CNN Prediction Map</h4>
                {% if CNN_MAP != "#" %}
                <iframe class="map-frame" src="{{CNN_MAP}}"></iframe>
                {% else %}
                <p class="muted">CNN prediction map belum tersedia</p>
                {% endif %}
            </div>

            <!-- ===== RIGHT : SUMMARY ===== -->
            <div class="card">
                <h3>Ringkasan Terbaru</h3>

                <h4>Event Terakhir</h4>
                <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Tanggal</th>
      <th>Lintang</th>
      <th>Bujur</th>
      <th>Magnitudo</th>
      <th>Kedalaman (km)</th>
      <th>Lokasi</th>
      <th>Keterangan</th>
      <th>Sumber</th>
      <th>Acquired_Date</th>
      <th>Nama</th>
      <th>EQ_Lintang</th>
      <th>EQ_Bujur</th>
      <th>VRP_Max</th>
      <th>MSI_summit (W)</th>
      <th>MSI_total (W)</th>
      <th>Magnitudo_Original</th>
      <th>Kedalaman_Original</th>
      <th>isVulkanik</th>
      <th>isTektonik</th>
      <th>seismic_energy_log10</th>
      <th>R1_final</th>
      <th>R2_final</th>
      <th>R3_final</th>
      <th>AreaTerdampak_km2</th>
      <th>tfe_doy_sin</th>
      <th>tfe_doy_cos</th>
      <th>tfe_weekday_sin</th>
      <th>Intensity</th>
      <th>cluster_id</th>
      <th>time_since_last_event_days</th>
      <th>OLI_total (W)</th>
      <th>Magnitudo_scaled</th>
      <th>Kedalaman (km)_scaled</th>
      <th>seismic_energy_log10_scaled</th>
      <th>time_since_last_event_days_scaled</th>
      <th>impact_level</th>
      <th>Magnitudo_lag1</th>
      <th>Magnitudo_lag3</th>
      <th>Magnitudo_roll_mean3</th>
      <th>Magnitudo_roll_std3</th>
      <th>Magnitudo_roll_mean7</th>
      <th>Magnitudo_roll_std7</th>
      <th>VRP_Max_lag1</th>
      <th>VRP_Max_lag3</th>
      <th>VRP_Max_roll_mean3</th>
      <th>VRP_Max_roll_std3</th>
      <th>VRP_Max_roll_mean7</th>
      <th>VRP_Max_roll_std7</th>
      <th>R3_final_lag1</th>
      <th>R3_final_lag3</th>
      <th>R3_final_roll_mean3</th>
      <th>R3_final_roll_std3</th>
      <th>R3_final_roll_mean7</th>
      <th>R3_final_roll_std7</th>
      <th>seismic_energy_log10_lag1</th>
      <th>seismic_energy_log10_lag3</th>
      <th>seismic_energy_log10_roll_mean3</th>
      <th>seismic_energy_log10_roll_std3</th>
      <th>seismic_energy_log10_roll_mean7</th>
      <th>seismic_energy_log10_roll_std7</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.5</td>
      <td>10.0</td>
      <td>NaN</td>
      <td>1 kali gempa Hembusan\n2 kali gempa Tremor Non-Harmonik\n3 kali gempa Vulkanik Dangkal\n1 kali gempa Vulkanik Dalam\n5 kali gempa Tektonik Lokal\n3 kali gempa Tektonik Jauh\n1 kali gempa Tremor Menerus</td>
      <td>VolcanoDiscovery</td>
      <td>2025-12-15 20:39:00</td>
      <td>Ijen</td>
      <td>-7.96</td>
      <td>114.15</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>2.5</td>
      <td>10.0</td>
      <td>1</td>
      <td>1</td>
      <td>8.55</td>
      <td>9.69</td>
      <td>21.318</td>
      <td>38.76</td>
      <td>4719.732767</td>
      <td>-0.275913</td>
      <td>0.961183</td>
      <td>0.0</td>
      <td>25.0</td>
      <td>0</td>
      <td>0.377778</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.285714</td>
      <td>0.0</td>
      <td>0.754026</td>
      <td>Sedang</td>
      <td>2.6</td>
      <td>2.3</td>
      <td>2.433333</td>
      <td>0.208167</td>
      <td>2.614286</td>
      <td>0.296808</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>38.434667</td>
      <td>42.570667</td>
      <td>37.149671</td>
      <td>2.512695</td>
      <td>44.862811</td>
      <td>8.286002</td>
      <td>8.7</td>
      <td>8.25</td>
      <td>8.45</td>
      <td>0.31225</td>
      <td>8.721429</td>
      <td>0.445213</td>
    </tr>
  </tbody>
</table>

                <div class="hr"></div>

                <h4>CNN Output</h4>
                <p class="muted">
                    CSV: <a href="output\cnn_results\results\cnn_predictions_latest.csv" target="_blank">Download</a><br>
                    JSON: <a href="output\cnn_results\cnn_predictions_latest.json" target="_blank">Download</a>
                </p>

                <div id="cnn_images">
                    {{CNN_IMAGE_LIST_HTML}}
                </div>
            </div>

        </div>

        <!-- ================= ROW 2 ================= -->
        <div class="card" style="margin-top:16px;">
            <h3>Evaluasi Naive Bayes</h3>
            <div style="display:flex;gap:16px;">
                <div style="flex:1;">
                    {{NB_METRICS_HTML}}
                </div>
                <div style="width:360px;">
                    <img class="plot" src="{{NB_CONFUSION_PNG}}">
                    <img class="plot" src="{{NB_ROC_PNG}}" style="margin-top:10px;">
                </div>
            </div>
        </div>

        <footer>
            VolcanoAI Dashboard • monitor_live_template.html
        </footer>

    </div>

    <script>
        function manualRefresh() { location.reload(true); }
        setInterval(() => location.reload(true), 60000);
    </script>

</body>
</html>
