<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>VolcanoAI Client Dashboard</title>

    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: #f4f6f9;
        }

        .header {
            padding: 16px;
            background: #111827;
            color: white;
            font-size: 20px;
            font-weight: bold;
        }

        .container {
            display: flex;
            height: calc(100vh - 60px);
        }

        .sidebar {
            width: 320px;
            padding: 16px;
            background: #ffffff;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .card {
            margin-bottom: 16px;
            padding: 14px;
            border-radius: 10px;
            background: #f9fafb;
        }

        .status {
            font-size: 26px;
            font-weight: bold;
            color: #16a34a;
        }

        .map {
            flex: 1;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>

    <div class="header">🌋 VolcanoAI – Client Monitoring Dashboard</div>

    <div class="container">

        <div class="sidebar">

            <div class="card">
                <div>Status Prediksi</div>
                <div id="status" class="status">-</div>
            </div>

            <div class="card">
                <b>Magnitudo:</b> <span id="mag">-</span><br>
                <b>Prediksi Area CNN:</b> <span id="area">-</span> km²<br>
                <b>Risk Score:</b> <span id="risk">-</span>
            </div>

        </div>

        <div class="map">
            <div id="map"></div>
        </div>

    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!DOCTYPE html>
    <html lang="id">
    <head>
        <meta charset="UTF-8">
        <title>VolcanoAI Client Dashboard</title>

        <link rel="stylesheet"
              href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

        <style>
            body {
                margin: 0;
                font-family: Arial, sans-serif;
                background: #f4f6f9;
            }

            .header {
                padding: 16px;
                background: #111827;
                color: white;
                font-size: 20px;
                font-weight: bold;
            }

            .container {
                display: flex;
                height: calc(100vh - 60px);
            }

            .sidebar {
                width: 320px;
                padding: 16px;
                background: #ffffff;
                box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            }

            .card {
                margin-bottom: 16px;
                padding: 14px;
                border-radius: 10px;
                background: #f9fafb;
            }

            .status {
                font-size: 26px;
                font-weight: bold;
                color: #16a34a;
            }

            .map {
                flex: 1;
            }

            #map {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>

        <div class="header">🌋 VolcanoAI – Client Monitoring Dashboard</div>

        <div class="container">

            <div class="sidebar">

                <div class="card">
                    <div>Status Prediksi</div>
                    <div id="status" class="status">-</div>
                </div>

                <div class="card">
                    <b>Magnitudo:</b> <span id="mag">-</span><br>
                    <b>Prediksi Area CNN:</b> <span id="area">-</span> km²<br>
                    <b>Risk Score:</b> <span id="risk">-</span>
                </div>

            </div>

            <div class="map">
                <div id="map"></div>
            </div>

        </div>

        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

        <script>
            const map = L.map("map").setView([-8.03, 113.31], 9);
            L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png").addTo(map);

            let marker;

            async function loadCNN() {
                const res = await fetch("../cnn_results/cnn_predictions_latest.json");
                const data = await res.json();

                document.getElementById("status").innerText = data.status;
                document.getElementById("mag").innerText = data.magnitude;
                document.getElementById("area").innerText = data.predicted_area.toFixed(2);
                document.getElementById("risk").innerText = data.risk_score.toFixed(3);

                if (marker) map.removeLayer(marker);

                marker = L.circle(
                    [data.center_lat, data.center_lon],
                    { radius: data.predicted_area * 30, color: "purple" }
                ).addTo(map);
            }

            loadCNN();
            setInterval(loadCNN, 10000);
        </script>

    </body>
</html>



